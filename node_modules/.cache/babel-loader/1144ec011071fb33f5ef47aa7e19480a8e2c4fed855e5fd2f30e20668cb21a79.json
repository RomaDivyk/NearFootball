{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  state: {\n    token: null\n  },\n  mutations: {\n    // мутації це по суті сетери, які додають дані в стейт\n    // Payload (другий параметр) (state, payload) — це дані, які передаютсья нашою мутацією з компонента, який робить мутацію\n    setToken: function setToken(state, token) {\n      console.log(token);\n      state.token = token;\n    },\n    destroyToken: function destroyToken(state) {\n      state.token = null;\n    }\n  },\n  actions: {\n    // Мутації є синхронними і ми не можемо запускати асинхронні операції, такі як виклики API, всередині мутації\n    // Що робити в такій ситуації? Створювати Дії  (Actions).\n    // Дії подібні на мутації, але замість того, щоб напряму змінювати стан (стейт), вони роблять мутацію\n    authUser: function authUser(_ref, authData) {\n      var _this = this;\n      var commit = _ref.commit;\n      var key = \"AIzaSyAOyTrULzGd7rbuhaDsFWIMR4V6hmdWV3A\";\n      return axios.post(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=\".concat(key), {\n        email: authData.email,\n        password: authData.password,\n        returnSecureToken: true\n      }).then(function (res) {\n        var token = res.data.idToken;\n        commit(\"setToken\", token);\n        localStorage.setItem(\"token\", token);\n      })[\"catch\"](function (e) {\n        console.log(\"Zalupa Horse\");\n        _this.$router.push(\"/auth\");\n      });\n    },\n    // по факту цей екшн не використовується, а просто в routes.js прописана та ж логіка\n    // є одне \"але\" - через routes.js не відправляється коміт \"setToken\" і при перезавантажені\n    // сторінки в стейті пропадає токен, але зберігається в localStorage. Все ж таки - не викидає.\n    // ШЛЯПА - треба пофіксити!\n    initAuth: function initAuth(_ref2) {\n      var commit = _ref2.commit;\n      var token = localStorage.getItem(\"token\");\n      if (!token) {\n        return false;\n      } else {\n        commit(\"setToken\", token);\n      }\n    },\n    logoutUser: function logoutUser(_ref3) {\n      var commit = _ref3.commit;\n      // commit це відправка мутації !!!!!\n      commit(\"destroyToken\");\n      localStorage.removeItem(\"token\");\n    }\n  },\n  getters: {\n    checkAuthUser: function checkAuthUser(state) {\n      return state.token != null;\n    },\n    auth: function auth(state) {\n      return state.user;\n    }\n  }\n};","map":{"version":3,"names":["axios","state","token","mutations","setToken","console","log","destroyToken","actions","authUser","authData","commit","key","post","email","password","returnSecureToken","then","res","data","idToken","localStorage","setItem","e","$router","push","initAuth","getItem","logoutUser","removeItem","getters","checkAuthUser","auth","user"],"sources":["/Users/viktor/Desktop/okoloukola/src/store/okoloStore.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default {\n  state: {\n    token: null,\n  },\n  mutations: {\n    // мутації це по суті сетери, які додають дані в стейт\n    // Payload (другий параметр) (state, payload) — це дані, які передаютсья нашою мутацією з компонента, який робить мутацію\n\n    setToken(state, token) {\n      console.log(token);\n      state.token = token;\n    },\n    destroyToken(state) {\n      state.token = null;\n    },\n  },\n  actions: {\n    // Мутації є синхронними і ми не можемо запускати асинхронні операції, такі як виклики API, всередині мутації\n    // Що робити в такій ситуації? Створювати Дії  (Actions).\n    // Дії подібні на мутації, але замість того, щоб напряму змінювати стан (стейт), вони роблять мутацію\n\n    authUser({ commit }, authData) {\n      const key = \"AIzaSyAOyTrULzGd7rbuhaDsFWIMR4V6hmdWV3A\";\n      return axios\n        .post(\n          `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${key}`,\n          {\n            email: authData.email,\n            password: authData.password,\n            returnSecureToken: true,\n          }\n        )\n        .then((res) => {\n          let token = res.data.idToken;\n          commit(\"setToken\", token);\n          localStorage.setItem(\"token\", token);\n        })\n        .catch((e) => {\n          console.log(\"Zalupa Horse\");\n          this.$router.push(\"/auth\");\n        });\n    },\n    // по факту цей екшн не використовується, а просто в routes.js прописана та ж логіка\n    // є одне \"але\" - через routes.js не відправляється коміт \"setToken\" і при перезавантажені\n    // сторінки в стейті пропадає токен, але зберігається в localStorage. Все ж таки - не викидає.\n    // ШЛЯПА - треба пофіксити!\n    initAuth({ commit }) {\n      let token = localStorage.getItem(\"token\");\n      if (!token) {\n        return false;\n      } else {\n        commit(\"setToken\", token);\n      }\n    },\n    logoutUser({ commit }) {\n      // commit це відправка мутації !!!!!\n      commit(\"destroyToken\");\n      localStorage.removeItem(\"token\");\n    },\n  },\n\n  getters: {\n    checkAuthUser(state) {\n      return state.token != null;\n    },\n    auth(state) {\n      return state.user;\n    },\n  },\n};\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,eAAe;EACbC,KAAK,EAAE;IACLC,KAAK,EAAE;EACT,CAAC;EACDC,SAAS,EAAE;IACT;IACA;IAEAC,QAAQ,oBAACH,KAAK,EAAEC,KAAK,EAAE;MACrBG,OAAO,CAACC,GAAG,CAACJ,KAAK,CAAC;MAClBD,KAAK,CAACC,KAAK,GAAGA,KAAK;IACrB,CAAC;IACDK,YAAY,wBAACN,KAAK,EAAE;MAClBA,KAAK,CAACC,KAAK,GAAG,IAAI;IACpB;EACF,CAAC;EACDM,OAAO,EAAE;IACP;IACA;IACA;IAEAC,QAAQ,0BAAaC,QAAQ,EAAE;MAAA;MAAA,IAApBC,MAAM,QAANA,MAAM;MACf,IAAMC,GAAG,GAAG,yCAAyC;MACrD,OAAOZ,KAAK,CACTa,IAAI,qFAC0ED,GAAG,GAChF;QACEE,KAAK,EAAEJ,QAAQ,CAACI,KAAK;QACrBC,QAAQ,EAAEL,QAAQ,CAACK,QAAQ;QAC3BC,iBAAiB,EAAE;MACrB,CAAC,CACF,CACAC,IAAI,CAAC,UAACC,GAAG,EAAK;QACb,IAAIhB,KAAK,GAAGgB,GAAG,CAACC,IAAI,CAACC,OAAO;QAC5BT,MAAM,CAAC,UAAU,EAAET,KAAK,CAAC;QACzBmB,YAAY,CAACC,OAAO,CAAC,OAAO,EAAEpB,KAAK,CAAC;MACtC,CAAC,CAAC,SACI,CAAC,UAACqB,CAAC,EAAK;QACZlB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;QAC3B,KAAI,CAACkB,OAAO,CAACC,IAAI,CAAC,OAAO,CAAC;MAC5B,CAAC,CAAC;IACN,CAAC;IACD;IACA;IACA;IACA;IACAC,QAAQ,2BAAa;MAAA,IAAVf,MAAM,SAANA,MAAM;MACf,IAAIT,KAAK,GAAGmB,YAAY,CAACM,OAAO,CAAC,OAAO,CAAC;MACzC,IAAI,CAACzB,KAAK,EAAE;QACV,OAAO,KAAK;MACd,CAAC,MAAM;QACLS,MAAM,CAAC,UAAU,EAAET,KAAK,CAAC;MAC3B;IACF,CAAC;IACD0B,UAAU,6BAAa;MAAA,IAAVjB,MAAM,SAANA,MAAM;MACjB;MACAA,MAAM,CAAC,cAAc,CAAC;MACtBU,YAAY,CAACQ,UAAU,CAAC,OAAO,CAAC;IAClC;EACF,CAAC;EAEDC,OAAO,EAAE;IACPC,aAAa,yBAAC9B,KAAK,EAAE;MACnB,OAAOA,KAAK,CAACC,KAAK,IAAI,IAAI;IAC5B,CAAC;IACD8B,IAAI,gBAAC/B,KAAK,EAAE;MACV,OAAOA,KAAK,CAACgC,IAAI;IACnB;EACF;AACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}