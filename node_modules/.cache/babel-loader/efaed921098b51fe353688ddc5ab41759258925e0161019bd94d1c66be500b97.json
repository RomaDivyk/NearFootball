{"ast":null,"code":"import _objectSpread from \"/Users/viktor/Desktop/okoloukola/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";\nimport \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nexport default {\n  state: {\n    token: null,\n    playersAdded: []\n  },\n  mutations: {\n    setToken: function setToken(state, token) {\n      console.log(token);\n      state.token = token;\n    },\n    destroyToken: function destroyToken(state) {\n      state.token = null;\n    },\n    setPlayers: function setPlayers(state, playersArray) {\n      console.log(playersArray);\n      state.playersAdded = playersArray;\n    },\n    addNewPlayer: function addNewPlayer(state, newPlayer) {\n      state.playersAdded.push(newPlayer);\n    }\n  },\n  actions: {\n    authUser: function authUser(_ref, authData) {\n      var _this = this;\n      var commit = _ref.commit;\n      var key = \"AIzaSyAOyTrULzGd7rbuhaDsFWIMR4V6hmdWV3A\";\n      return axios.post(\"https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=\".concat(key), {\n        email: authData.email,\n        password: authData.password,\n        returnSecureToken: true\n      }).then(function (res) {\n        var token = res.data.idToken;\n        commit(\"setToken\", token);\n        localStorage.setItem(\"token\", token);\n      })[\"catch\"](function (e) {\n        console.log(\"Erron! Wrong email or password!\");\n        _this.$router.push(\"/auth\");\n      });\n    },\n    initAuth: function initAuth(_ref2) {\n      var commit = _ref2.commit;\n      var token = localStorage.getItem(\"token\");\n      if (!token) {\n        return false;\n      } else {\n        commit(\"setToken\", token);\n      }\n    },\n    logoutUser: function logoutUser(_ref3) {\n      var commit = _ref3.commit;\n      commit(\"destroyToken\");\n      localStorage.removeItem(\"token\");\n    },\n    loadPlayers: function loadPlayers(_ref4) {\n      var commit = _ref4.commit;\n      return axios.get(\"https://okoloukola-13e0b-default-rtdb.firebaseio.com/players.json\").then(function (res) {\n        var playersArray = [];\n        for (var key in res.data) {\n          playersArray.push(_objectSpread(_objectSpread({}, res.data[key]), {}, {\n            id: key\n          }));\n        }\n        commit(\"setPlayers\", playersArray);\n      });\n    },\n    addNewPlayer: function addNewPlayer(_ref5, newPlayer) {\n      var commit = _ref5.commit;\n      return axios.post(\"https://okoloukola-13e0b-default-rtdb.firebaseio.com/players.json\", newPlayer).then(function (res) {\n        commit(\"addNewPlayer\", newPlayer);\n        /* console.log(res); */\n      })[\"catch\"](function (e) {\n        return console.log(e);\n      });\n    }\n  },\n  getters: {\n    getPlayersAdded: function getPlayersAdded(state) {\n      return state.playersAdded;\n    },\n    checkAuthUser: function checkAuthUser(state) {\n      return state.token != null;\n    }\n  }\n};","map":{"version":3,"names":["axios","state","token","playersAdded","mutations","setToken","console","log","destroyToken","setPlayers","playersArray","addNewPlayer","newPlayer","push","actions","authUser","authData","commit","key","post","email","password","returnSecureToken","then","res","data","idToken","localStorage","setItem","e","$router","initAuth","getItem","logoutUser","removeItem","loadPlayers","get","id","getters","getPlayersAdded","checkAuthUser"],"sources":["/Users/viktor/Desktop/okoloukola/src/store/okoloStore.js"],"sourcesContent":["import axios from \"axios\";\n\nexport default {\n  state: {\n    token: null,\n    playersAdded: [],\n  },\n  mutations: {\n    setToken(state, token) {\n      console.log(token);\n      state.token = token;\n    },\n\n    destroyToken(state) {\n      state.token = null;\n    },\n\n    setPlayers(state, playersArray) {\n      console.log(playersArray);\n      state.playersAdded = playersArray;\n    },\n\n    addNewPlayer(state, newPlayer) {\n      state.playersAdded.push(newPlayer);\n    },\n  },\n  actions: {\n    authUser({ commit }, authData) {\n      const key = \"AIzaSyAOyTrULzGd7rbuhaDsFWIMR4V6hmdWV3A\";\n      return axios\n        .post(\n          `https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=${key}`,\n          {\n            email: authData.email,\n            password: authData.password,\n            returnSecureToken: true,\n          }\n        )\n        .then((res) => {\n          let token = res.data.idToken;\n          commit(\"setToken\", token);\n          localStorage.setItem(\"token\", token);\n        })\n        .catch((e) => {\n          console.log(\"Erron! Wrong email or password!\");\n          this.$router.push(\"/auth\");\n        });\n    },\n\n    initAuth({ commit }) {\n      let token = localStorage.getItem(\"token\");\n      if (!token) {\n        return false;\n      } else {\n        commit(\"setToken\", token);\n      }\n    },\n\n    logoutUser({ commit }) {\n      commit(\"destroyToken\");\n      localStorage.removeItem(\"token\");\n    },\n\n    loadPlayers({ commit }) {\n      return axios\n        .get(\n          \"https://okoloukola-13e0b-default-rtdb.firebaseio.com/players.json\"\n        )\n        .then((res) => {\n          const playersArray = [];\n          for (let key in res.data) {\n            playersArray.push({ ...res.data[key], id: key });\n          }\n\n          commit(\"setPlayers\", playersArray);\n        });\n    },\n\n    addNewPlayer({ commit }, newPlayer) {\n      return axios\n        .post(\n          \"https://okoloukola-13e0b-default-rtdb.firebaseio.com/players.json\",\n          newPlayer\n        )\n        .then((res) => {\n          commit(\"addNewPlayer\", newPlayer);\n          /* console.log(res); */\n        })\n        .catch((e) => console.log(e));\n    },\n  },\n\n  getters: {\n    getPlayersAdded(state) {\n      return state.playersAdded;\n    },\n\n    checkAuthUser(state) {\n      return state.token != null;\n    },\n  },\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}